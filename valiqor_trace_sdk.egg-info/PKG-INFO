Metadata-Version: 2.4
Name: valiqor-trace-sdk
Version: 1.0.0
Summary: Local AI workflow tracing SDK for demos and MVPs
Author-email: Valiqor Team <contact@valiqor.com>
License: MIT
Project-URL: Homepage, https://valiqor.com
Project-URL: Documentation, https://github.com/valiqor/valiqor-trace-sdk
Project-URL: Repository, https://github.com/valiqor/valiqor-trace-sdk
Project-URL: Issues, https://github.com/valiqor/valiqor-trace-sdk/issues
Keywords: ai,tracing,llm,observability,rag,demo
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Provides-Extra: dev
Requires-Dist: pytest>=7.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Dynamic: license-file

# Valiqor Trace SDK

> **Local AI Workflow Tracing for Demos & MVPs**  
> No network calls ‚Ä¢ No external services ‚Ä¢ Pure local JSONL traces

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![MVP Target: Jan 2026](https://img.shields.io/badge/MVP-Jan%202026-green.svg)](https://valiqor.com)

---

## What is Valiqor Trace SDK?

A **lightweight, local-only tracing SDK** for capturing AI workflow execution during demos and MVPs. Think of it as a minimal observability layer that writes sanitized traces to local JSONL files ‚Äî perfect for showcasing RAG pipelines, agent workflows, and LLM calls without the overhead of cloud platforms.

**Use this SDK when you want to:**
- Demo AI workflows with visual trace outputs
- Debug local LLM/RAG applications
- Prototype observability features before scaling
- Keep all data local with automatic PII redaction

**This SDK does NOT:**
- Send data to external services
- Require API keys or credentials
- Include proprietary eval/judge/fix logic
- Expose internal endpoints or configs

---

## Quick Start

### Installation

```bash
pip install -e .
```

### Basic Usage

```python
from valiqor import Trace

# Initialize tracer
trace = Trace(app="my-rag-app", env="dev")

# Trace a session
with trace.session(metadata={"user": "demo"}):
    
    # Add retrieval span
    trace.add_span(
        name="llm.call",
        model="gpt-4",
        prompt="What is RAG?",
        response="RAG stands for Retrieval-Augmented Generation...",
        latency_ms=850
    )
    
    # Add tool span
    trace.add_span(
        name="tool.search",
        query="latest AI papers",
        results_count=5
    )

# ‚úÖ Trace saved to /tmp/valiqor/trace_<run_id>_<timestamp>.jsonl
```

### Decorator Usage

```python
@trace.span("data_processing")
def process_data(x):
    return x * 2

with trace.session():
    result = process_data(42)  # Automatically traced
```

---

## CLI Commands

### Run Demo Trace

```bash
valiqor trace run --app demo --scenario s1
```

**Output:**
```
üöÄ Running demo trace for demo (scenario: s1)
üìù Valiqor trace started: /tmp/valiqor/trace_run_abc123_20250107_143022.jsonl
‚úÖ Trace completed: 3 spans, 1675ms
   Saved to: /tmp/valiqor/trace_run_abc123_20250107_143022.jsonl
```

### Scan Repository

```bash
valiqor scan . --out context_map.json
```

**Output:**
```
üìÇ Scanning repository: .
üìÇ Scanned 47 files (125,483 bytes)
   Found 3 prompt files
   Saved to: context_map.json
```

---

## Examples

### RAG Demo with Full Tracing

```python
from valiqor import Trace

trace = Trace(app="rag-demo", env="dev")

with trace.session(metadata={"query": "Q3 highlights"}):
    
    # 1. Retrieval
    trace.add_span(
        name="rag.retrieval",
        query="Q3 financial highlights",
        retriever="vectordb",
        documents_retrieved=5,
        top_scores=[0.89, 0.85, 0.82],
        latency_ms=234
    )
    
    # 2. Generation
    trace.add_span(
        name="llm.call",
        model="gpt-4",
        input_tokens=850,
        output_tokens=320,
        cost_usd=0.0087,
        latency_ms=2100
    )
    
    # 3. Judge (optional quality check)
    trace.add_span(
        name="judge.evaluate",
        metric="relevance",
        score=0.92,
        reasoning="Response addresses query with specific data"
    )
```

See [examples/simple_rag_demo.py](examples/simple_rag_demo.py) for a runnable example.

---

## Sample Output (JSONL)

```jsonl
{"record_type": "metadata", "run_id": "run_abc123", "app": "rag-demo", "env": "dev"}
{"record_type": "span", "span_id": "span_x1y2", "name": "rag.retrieval", "documents_retrieved": 5, "latency_ms": 234}
{"record_type": "span", "span_id": "span_z3w4", "name": "llm.call", "model": "gpt-4", "cost_usd": 0.0087}
{"record_type": "summary", "run_id": "run_abc123", "duration_ms": 2514, "span_count": 2}
```

---

## Architecture

```
valiqor-trace-sdk/
‚îú‚îÄ‚îÄ valiqor/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           # Public API
‚îÇ   ‚îú‚îÄ‚îÄ trace.py              # Trace & session()
‚îÇ   ‚îú‚îÄ‚îÄ redact.py             # PII/token redaction
‚îÇ   ‚îú‚îÄ‚îÄ context_scanner.py    # Repo scanner
‚îÇ   ‚îú‚îÄ‚îÄ cli.py                # CLI commands
‚îÇ   ‚îî‚îÄ‚îÄ sinks/
‚îÇ       ‚îî‚îÄ‚îÄ file_sink.py      # Local JSONL writer
‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îú‚îÄ‚îÄ simple_rag_demo.py    # Demo script
‚îÇ   ‚îú‚îÄ‚îÄ sample_trace.jsonl    # Example output
‚îÇ   ‚îî‚îÄ‚îÄ eval_output.json      # Example eval result
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ test_trace_minimal.py
‚îÇ   ‚îî‚îÄ‚îÄ test_context_scanner.py
‚îî‚îÄ‚îÄ pyproject.toml
```

---

## Features

| Feature | Status |
|---------|--------|
| ‚úÖ Local JSONL traces | Stable |
| ‚úÖ Automatic PII redaction | Stable |
| ‚úÖ `@trace.span` decorator | Stable |
| ‚úÖ CLI demo runner | Stable |
| ‚úÖ Repository scanner | Stable |
| üöß HttpSink (enterprise) | Roadmap |
| üöß Judge/Eval integration | Interfaces only |
| üöß Cloud dashboard | Private repo |

---

## Privacy & Security

**All data stays local.** This SDK:
- Writes only to `/tmp/valiqor` (or OS temp dir)
- Never makes network calls
- Redacts API keys, passwords, tokens, PII
- Provides safe stubs for sensitive operations

For enterprise deployments, we offer a private `HttpSink` that integrates with our closed platform. Contact us for details.

---

## Development

### Setup

```bash
git clone https://github.com/valiqor/valiqor-trace-sdk
cd valiqor-trace-sdk
pip install -e ".[dev]"
```

### Run Tests

```bash
pytest tests/
```

### Lint

```bash
ruff check valiqor/
```

---

## MVP Roadmap (Jan 2026)

- [x] Core tracing API
- [x] Local JSONL sink
- [x] CLI tools
- [x] Examples & tests
- [ ] Integration examples (LangChain, LlamaIndex)
- [ ] Visual trace viewer (HTML export)
- [ ] Docker demo container

---

## FAQ

**Q: Does this send data anywhere?**  
A: No. All traces are written locally to `/tmp/valiqor` as JSONL files.

**Q: Can I use this in production?**  
A: This SDK is designed for demos and MVPs. For production, consider our enterprise platform (contact us).

**Q: How do I visualize traces?**  
A: Traces are JSONL files. Use tools like `jq`, parse them in Python, or wait for our HTML viewer (coming soon).

**Q: What about enterprise features?**  
A: Contact us about our private platform with advanced eval, dashboards, and team collaboration.

---

## Contributing

We welcome contributions! Please:
1. Fork the repo
2. Create a feature branch
3. Add tests for new functionality
4. Submit a pull request

---

## License

MIT License - see [LICENSE](LICENSE) for details.

---

## Links

- **Website:** [valiqor.com](https://valiqor.com)
- **Demo:** [demo.valiqor.com](https://demo.valiqor.com)
- **Docs:** [docs.valiqor.com](https://docs.valiqor.com)
- **Enterprise:** [enterprise@valiqor.com](mailto:enterprise@valiqor.com)

---

**Built with ‚ù§Ô∏è by the Valiqor Team**  
*Making AI workflows traceable, one span at a time.*
